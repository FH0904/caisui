(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login/index1"],{"1a81":function(t,i,e){"use strict";e("ab7f");var n=o(e("b0ce")),a=o(e("d84c"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(a.default))},"38a3":function(t,i,e){},"83d8":function(t,i,e){"use strict";e.r(i);var n=e("f5bd"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);i["default"]=a.a},"9e07":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"content"},[e("view",{staticClass:"login-t"},[e("image",{staticClass:"login-logo",attrs:{src:t.logoImage,mode:"aspectFill"}})]),e("view",[e("view",{staticClass:"login-m"},[e("view",{staticClass:"login-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"number",maxlength:t.maxMobile,placeholder:"请输入手机号码","placeholder-class":"login-item-i-p",eventid:"4bc55440-0"},domProps:{value:t.mobile},on:{input:function(i){i.target.composing||(t.mobile=i.target.value)}}})]),e("view",{staticClass:"login-item flc"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"login-item-input",attrs:{password:!0,"placeholder-class":"login-item-i-p",type:"text",placeholder:"请输入密码",eventid:"4bc55440-1"},domProps:{value:t.pwd},on:{input:function(i){i.target.composing||(t.pwd=i.target.value)}}})]),t.isCaptcha?e("view",{staticClass:"login-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],staticClass:"login-item-input",attrs:{"placeholder-class":"login-item-i-p",type:"text",placeholder:"输入验证码",eventid:"4bc55440-2"},domProps:{value:t.captcha},on:{input:function(i){i.target.composing||(t.captcha=i.target.value)}}}),e("img",{attrs:{src:t.captchaUrl,alt:""}})]):t._e()]),e("view",{staticClass:"login-b"},[e("button",{class:t.loginButtonClass,attrs:{"hover-class":"btn-hover",eventid:"4bc55440-3"},on:{click:t.loginHandler}},[t._v("登录")]),e("view",{staticClass:"login-other flc"},[e("view",{staticClass:"fz12 item",attrs:{eventid:"4bc55440-4"},on:{click:t.selectLoginType}},[t._v("验证码登录")]),e("view",{staticClass:"fz12 item",attrs:{eventid:"4bc55440-5"},on:{click:t.toReg}},[t._v("注册")])])],1)]),e("view",{staticClass:"fz12 g5"},[t._v("第三方账号登录：")]),t.thirdPartyLogins.length>0?e("view",{staticClass:"flc third-block"},t._l(t.thirdPartyLogins,function(i,n,a){return e("view",{key:n,staticClass:"third-item",attrs:{eventid:"4bc55440-6-"+n},on:{click:function(e){t.handleThirdLoginApp(i)}}},["weixin"==i?e("image",{staticClass:"third-item-img",attrs:{src:"/static/image/ic-wechat.png",mode:"aspectFill"}}):t._e()])})):t._e()])},a=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return a})},ba02:function(t,i,e){"use strict";var n=e("38a3"),a=e.n(n);a.a},d84c:function(t,i,e){"use strict";e.r(i);var n=e("9e07"),a=e("83d8");for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);e("ba02");var s=e("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);i["default"]=r.exports},f5bd:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("99f4"),a=e("4856"),o={mixins:[a.goBack,a.jumpBackPage],data:function(){return{maxMobile:11,mobile:"",pwd:"",isCaptcha:!1,captcha:"",captchaUrl:"",btnb:"btn btn-square btn-c btn-all",weixinBrowser:!1,thirdPartyLogins:[]}},onLoad:function(t){t.invitecode&&this.$db.set("invitecode",t.invitecode),this.weixinBrowser=this.$common.isWeiXinBrowser(),this.weixinBrowser&&this.getAuths(),this.getAppAuths()},onShow:function(){this.$db.get("userToken")&&t.switchTab({url:"/pages/index/index"})},computed:{loginButtonClass:function(){return this.mobile&&11===this.mobile.length&&this.pwd?this.btnb+" btn-b":this.btnb},logoImage:function(){return this.$store.state.config.shop_logo},getThirdLoginImg:function(t){return function(t){return"Wxofficial"==t?"/static/image/ic-wechat.png":"weixin"==t?"/static/image/ic-wechat.png":void 0}}},methods:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?this.pwd?t.status=!0:(t.status=!1,t.msg="请输入密码"):(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},loginHandler:function(){this.mobile&&11===this.mobile.length&&this.pwd&&(this.rightMobile().status?this.toLogin():this.$common.errorToShow(this.rightMobile().msg))},getCaptchaUrl:function(){this.captcha=apiBaseUrl+"captcha.html"},toReg:function(){this.$common.navigateTo("/pages/login/register/index")},toLogin:function(){var t=this,i={mobile:this.mobile,password:this.pwd};this.isCaptcha&&(i.captcha=this.captcha);var e=this.$db.get("invitecode");e&&(i.invitecode=e),this.$api.login(i,function(i){i.status?(t.$db.set("userToken",i.data),t.redirectHandler()):t.$common.errorToShow(i.msg,function(){10013!==i.data&&10012!==i.data||(t.isCaptcha=!0),t.isCaptcha&&t.getCaptchaUrl()})})},redirectHandler:function(){this.$db.del("invitecode"),this.handleBack()},selectLoginType:function(){this.$common.redirectTo("/pages/login/login/index")},getAuths:function(){var t=this,i={url:n.baseUrl+"wap/#/pages/author"};this.$api.getTrustLogin(i,function(i){i.status&&(t.thirdPartyLogins=i.data)})},handleThirdLogin:function(t){this.$common.redirectTo("");var i=this.$store.state.redirectPage;this.$db.set("redirectPage",i),window.location.href=t},getAppAuths:function(){var i=this;i.thirdPartyLogins=[],t.getProvider({service:"oauth",success:function(t){"getProvider:ok"==t.errMsg&&(i.thirdPartyLogins=t.provider)}})},handleThirdLoginApp:function(i){t.showLoading({title:"加载中"});var e=this;t.login({provider:i,success:function(n){t.getUserInfo({provider:i,success:function(n){if("getUserInfo:ok"==n.errMsg){var a={user:n.userInfo,type:i},o=e.$db.get("invitecode");o&&(a.invitecode=o),e.$api.appTrustLogin(a,function(i){if(t.hideLoading(),i.status){if("undefined"!=typeof i.data.token)return e.$db.set("userToken",i.data.token),t.navigateBack({delta:1}),!1;t.redirectTo({url:"/pages/login/login/index?user_wx_id="+i.data.user_wx_id})}else e.$common.errorToShow("登录失败，请重试")})}else t.hideLoading(),e.$common.errorToShow("登录失败，请重试")}})}})}}};i.default=o}).call(this,e("6e42")["default"])}},[["1a81","common/runtime","common/vendor"]]]);