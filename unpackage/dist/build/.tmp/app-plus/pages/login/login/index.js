(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login/index"],{"0d17":function(e,t,i){"use strict";i.r(t);var o=i("1798"),n=i("e303");for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);i("7cb8");var r=i("2877"),a=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,null,null);t["default"]=a.exports},1798:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"content"},[i("view",{staticClass:"login-t"},[i("image",{staticClass:"login-logo",attrs:{src:e.logoImage,mode:"aspectFill"}})]),i("view",{staticClass:"login-m"},[i("view",{staticClass:"login-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"number",maxlength:e.maxMobile,placeholder:"请输入手机号码",focus:"","placeholder-class":"login-item-i-p",eventid:"5d486e11-0"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),i("view",{staticClass:"login-item flc"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"login-item-input",attrs:{"placeholder-class":"login-item-i-p",type:"text",placeholder:"请输入验证码",eventid:"5d486e11-1"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e.verification?i("view",{class:e.sendCodeBtn,attrs:{eventid:"5d486e11-2"},on:{click:e.sendCode}},[e._v("发送验证码")]):e._e(),e.verification?e._e():i("view",{staticClass:"btn btn-g"},[e._v(e._s(e.timer)+" 秒后重新获取")])])]),i("view",{staticClass:"login-b"},[e.user_wx_id?i("view",[i("button",{class:e.regButtonClass,attrs:{"hover-class":"btn-hover",eventid:"5d486e11-3"},on:{click:function(t){e.toBind()}}},[e._v("登录")])],1):i("view",[i("button",{class:e.regButtonClass,attrs:{"hover-class":"btn-hover",eventid:"5d486e11-4"},on:{click:function(t){e.login()}}},[e._v("登录")]),i("view",{staticClass:"login-other flc"},[i("view",{staticClass:"fz12 item",attrs:{eventid:"5d486e11-5"},on:{click:e.selectLoginType}},[e._v("密码登录")]),i("view",{staticClass:"fz12 item",attrs:{eventid:"5d486e11-6"},on:{click:e.toReg}},[e._v("注册")])])],1)])])},n=[];i.d(t,"a",function(){return o}),i.d(t,"b",function(){return n})},3572:function(e,t,i){"use strict";i("ab7f");var o=s(i("b0ce")),n=s(i("0d17"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,o.default)(n.default))},4347:function(e,t,i){},"7abe":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i("4856"),n={mixins:[o.goBack,o.jumpBackPage],data:function(){return{maxMobile:11,mobile:"",code:"",user_wx_id:"",verification:!0,timer:60,btnb:"btn btn-square btn-c btn-all",type:"",isWeixinBrowser:this.$common.isWeiXinBrowser()}},onLoad:function(t){t.user_wx_id&&(this.user_wx_id=t.user_wx_id,e.setNavigationBarTitle({title:"绑定手机号"}))},computed:{rightMobile:function(){var e={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?e.status=!0:(e.status=!1,e.msg="手机号格式不正确"):(e.status=!1,e.msg="请输入手机号"),e},sendCodeBtn:function(){var e="btn btn-g";return this.mobile.length===this.maxMobile&&this.rightMobile.status?e+" btn-b":e},regButtonClass:function(){return this.mobile&&this.mobile.length===this.maxMobile&&this.code?this.btnb+" btn-b":this.btnb},logoImage:function(){return this.$store.state.config.shop_logo}},onShow:function(){var t=this,i=t.$db.get("userToken");if(i)return e.switchTab({url:"/pages/member/index/index"}),!0;t.timer=parseInt(t.$db.get("timer")),null!=t.timer&&t.timer>0&&(t.countDown(),t.verification=!1)},methods:{sendCode:function(){var e=this;this.rightMobile.status?(this.$common.loadToShow("发送中..."),setTimeout(function(){e.$common.loadToHide(),e.$api.sms({mobile:e.mobile,code:"login"},function(t){t.status?(e.timer=60,e.verification=!1,e.$common.successToShow(t.msg),e.countDown()):e.$common.errorToShow(t.msg)})},1e3)):this.$common.errorToShow(this.rightMobile.msg)},toReg:function(){this.$common.navigateTo("/pages/login/register/index")},countDown:function(){var t=this,i=setInterval(function(){t.timer--,e.setStorage({key:"timer",data:t.timer,success:function(){}}),t.timer<=0&&(t.verification=!0,clearInterval(i))},1e3)},login:function(){var e=this,t=this;if(t.rightMobile.status)if(t.code){var i={mobile:t.mobile,code:t.code},o=t.$db.get("invitecode");o&&(i.invitecode=o),t.$api.smsLogin(i,function(i){i.status?(e.$db.set("userToken",i.data),t.redirectHandler()):t.$common.errorToShow(i.msg)})}else t.$common.errorToShow("请输入短信验证码!");else t.$common.errorToShow(t.rightMobile.msg)},redirectHandler:function(){var e=this;this.$common.successToShow("登录成功!",function(){e.$db.set("timer",0),e.$db.del("invitecode"),e.handleBack()})},toLogin:function(){e.navigateTo({url:"../../login/login/index"})},showTopTips:function(){var t=this;if(""==t.mobile)return t.$common.errorToShow("请输入手机号码"),!1;if(""==this.code)return t.$common.errorToShow("请输入验证码"),!1;if(0==t.user_wx_id)return t.$common.errorToShow("登录失败，请稍后再试",function(){e.navigateBack({delta:1})}),!1;var i=2;i=4;var o={mobile:t.mobile,code:t.code,platform:i,user_wx_id:t.user_wx_id},n=t.$db.get("invitecode");n&&(o.invitecode=n),t.$api.smsLogin(o,function(e){e.status?(t.$db.set("userToken",e.data),t.redirectHandler()):t.$common.errorToShow(e.msg)})},toBind:function(){var e=this;if(""==this.mobile)return this.$common.errorToShow("请输入手机号码"),!1;if(""==this.code)return this.$common.errorToShow("请输入验证码"),!1;var t={mobile:this.mobile,code:this.code,user_wx_id:this.user_wx_id},i=this.$db.get("invitecode");i&&(t.invitecode=i),this.$api.smsLogin(t,function(t){t.status?(e.$db.set("userToken",t.data),e.redirectHandler()):e.$common.errorToShow(t.msg)})},selectLoginType:function(){this.$common.redirectTo("./index1")}}};t.default=n}).call(this,i("6e42")["default"])},"7cb8":function(e,t,i){"use strict";var o=i("4347"),n=i.n(o);n.a},e303:function(e,t,i){"use strict";i.r(t);var o=i("7abe"),n=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,function(){return o[e]})}(s);t["default"]=n.a}},[["3572","common/runtime","common/vendor"]]]);