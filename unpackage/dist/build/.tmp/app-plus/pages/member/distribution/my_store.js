(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/distribution/my_store"],{"0546":function(t,e,s){"use strict";s.r(e);var o=s("a5c3"),a=s("160b");for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);s("d1b3");var r=s("2877"),n=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=n.exports},1411:function(t,e,s){"use strict";s("ab7f");var o=i(s("b0ce")),a=i(s("0546"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(a.default))},"160b":function(t,e,s){"use strict";s.r(e);var o=s("f162"),a=s.n(o);for(var i in o)"default"!==i&&function(t){s.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},"4ce8":function(t,e,s){},a5c3:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content my-store"},[s("view",{ref:"myStore"},[s("view",{staticClass:"my-store-t"},[s("view",{staticClass:"mst-top"},[s("image",{attrs:{src:t.store_banner_src,mode:"widthFix"}})]),s("view",{staticClass:"mst-bot"},[s("view",{staticClass:"member-grid"},[s("view",{staticClass:"member-item"},[s("image",{staticClass:"member-item-img",attrs:{src:t.store_logo_src}})]),s("view",{staticClass:"member-item"},[s("view",{staticClass:"color-o fsz36"},[t._v(t._s(t.total_goods))]),s("text",{staticClass:"member-item-text"},[t._v("全部宝贝")])]),s("view",{staticClass:"member-item",attrs:{eventid:"78a00c19-0"},on:{click:function(e){t.openPopup()}}},[s("image",{staticClass:"member-item-icon",attrs:{src:"../../../static/image/ic-me-collect.png"}}),s("text",{staticClass:"member-item-text"},[t._v("收藏本店")])]),s("view",{staticClass:"member-item"},[s("button",{staticClass:"share btn",attrs:{eventid:"78a00c19-1"},on:{click:function(e){t.createPoster()}}},[s("image",{staticClass:"member-item-icon",attrs:{src:"../../../static/image/qr_code.png"}}),s("text",{staticClass:"member-item-text"},[t._v("二维码")])])],1)])])]),s("view",{staticClass:"my-store-m"},[s("view",{staticClass:"search"},[s("view",{staticClass:"search-c",attrs:{eventid:"78a00c19-2"},on:{click:t.goSearch}},[s("view",{staticClass:"search-input search-input-p"},[s("view",{staticClass:"search-input-p-c"},[t._v(t._s(t.searchKey))])]),s("image",{staticClass:"icon search-icon",attrs:{src:"../../../static/image/zoom.png"}})])])]),s("lvv-popup",{ref:"lvvpopref",attrs:{position:"bottom",eventid:"78a00c19-4",mpcomid:"78a00c19-0"},on:{click:function(e){t.closePopup()}}},[s("view",{staticClass:"collect-pop",attrs:{eventid:"78a00c19-3"},on:{click:function(e){t.closePopup()}}},[t.isWeixinBrowser?s("image",{attrs:{src:"../../../static/image/wxh5.png",mode:"widthFix"}}):t._e()])])],1),s("view",{staticClass:"img-grids"},[t.goodsList.length>0?s("view",t._l(t.goodsList,function(e,o){return s("view",{key:o,staticClass:"img-grids-item",attrs:{eventid:"78a00c19-5-"+o},on:{click:function(s){t.goodsDetail(e.id)}}},[s("image",{staticClass:"img-grids-item-t have-none",attrs:{src:e.image_url,mode:"aspectFill"}}),s("view",{staticClass:"img-grids-item-b"},[s("view",{staticClass:"goods-name grids-goods-name"},[t._v(t._s(e.name))]),s("view",{staticClass:"goods-item-c"},[s("view",{staticClass:"goods-price red-price"},[t._v("￥"+t._s(e.price))]),s("image",{staticClass:"goods-cart",attrs:{src:"../../static/image/ic-car.png"}})])])])})):s("view",{staticClass:"order-none"},[s("image",{staticClass:"order-none-img",attrs:{src:"../../static/image/order.png",mode:""}})])]),s("uni-load-more",{attrs:{status:t.loadStatus,mpcomid:"78a00c19-1"}})],1)},a=[];s.d(e,"a",function(){return o}),s.d(e,"b",function(){return a})},d1b3:function(t,e,s){"use strict";var o=s("4ce8"),a=s.n(o);a.a},f162:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(s("0b96")),a=i(s("67a2"));s("99f4");function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return m(t)||c(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function m(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}var l={components:{lvvPopup:a.default,uniLoadMore:o.default},data:function(){return{goodsList:[],loadStatus:"more",orderItems:[{name:"全部宝贝",nums:"115"},{name:"收藏本店",icon:"../../../static/image/ic-me-collect.png"},{name:"二维码",icon:"../../../static/image/qr_code.png"}],storeCode:"",store_name:"",store_logo:"",store_logo_src:"",store_banner:"",store_desc:"",store_banner_src:"",isWeixinBrowser:this.$common.isWeiXinBrowser(),total_goods:0,myShareCode:"",page:1,searchKey:"请输入关键字搜索"}},onLoad:function(t){var e=t.store;this.storeCode=e,this.getDistribution(e),this.getGoods(),this.getMyShareCode()},mounted:function(){window.addEventListener("scroll",this.handleScroll)},updated:function(){var t=this;this.$nextTick(function(){window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;t.top_height=t.$refs.myStore.$el.clientHeight})},methods:{openPopup:function(){this.$refs.lvvpopref.show()},closePopup:function(){this.$refs.lvvpopref.close()},goSearch:function(){var t=getCurrentPages();t[t.length-2]},goodsDetail:function(t){var e="/pages/goods/index/index?id="+t;this.$common.navigateTo(e)},getGoods:function(){var t=this,e={page:this.page,limit:10};this.loadStatus="loading",this.$api.goodsList(e,function(e){e.status?(t.page>=e.data.total_page?t.loadStatus="noMore":(t.loadStatus="more",t.page++),t.goodsList=[].concat(r(t.goodsList),r(e.data.list))):t.$common.errorToShow(e.msg)})},getDistribution:function(e){var s=this;s.$api.getStoreInfo({store:e},function(e){e.status?(s.store_name=e.data.store_name,s.store_desc=e.data.store_desc,s.store_logo_src=e.data.store_logo_src,s.store_logo=e.data.store_logo,s.store_banner_src=e.data.store_banner_src,s.total_goods=e.data.total_goods,t.setNavigationBarTitle({title:s.store_name})):s.$common.errorToShow(e.msg)})},createPoster:function(){var t=this,e={type:4,id:this.storeCode},s=getCurrentPages(),o=(s[s.length-1],this.$db.get("userToken"));o&&(e.token=o),this.$api.createPoster(e,function(e){e.status?t.$common.navigateTo("/pages/share?poster="+e.data):t.$common.errorToShow(e.msg)})},getMyShareCode:function(){var t=this,e=this.$db.get("userToken");e&&""!=e&&this.$api.shareCode({},function(e){e.status&&(t.myShareCode=e.data?e.data:"")})}},onReachBottom:function(){"more"===this.loadStatus&&this.getGoods()},onShareAppMessage:function(){var t=this.myShareCode?this.myShareCode:"",e=this.$common.shareParameterDecode("type=9&invite="+t+"&id="+this.storeCode),s="/pages/share/jump?scene="+e;return{title:this.$store.state.config.share_title,imageUrl:this.$store.state.config.share_image,path:s}}};e.default=l}).call(this,s("6e42")["default"])}},[["1411","common/runtime","common/vendor"]]]);