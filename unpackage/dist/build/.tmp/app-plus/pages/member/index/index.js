(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/index/index"],{9754:function(t,e,i){"use strict";i.r(e);var a=i("9b2e"),n=i("e19b");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("df61");var o=i("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},"9b10":function(t,e,i){"use strict";i("ab7f");var a=s(i("b0ce")),n=s(i("9754"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},"9b2e":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("view",{staticClass:"member-top"},[i("image",{staticClass:"bg-img",attrs:{src:"../../../static/image/member-bg.png"}}),i("view",{staticClass:"member-top-c"},[t.hasLogin?[i("image",{staticClass:"user-head-img",attrs:{mode:"aspectFill",src:t.userInfo.avatar}}),i("view",{staticClass:"user-name"},[t._v(t._s(t.userInfo.nickname))]),t.userInfo.grade_name?i("view",{staticClass:"fz12 grade"},[t._v(t._s(t.userInfo.grade_name))]):t._e()]:[i("image",{staticClass:"user-head-img",attrs:{mode:"aspectFill",src:t.$store.state.config.shop_logo}}),i("view",{staticClass:"login-btn",attrs:{eventid:"89c9d496-0"},on:{click:t.toLogin}},[t._v("登录/注册")])]],2)]),i("view",{staticClass:"cell-group"},[i("view",{staticClass:"cell-item right-img",attrs:{eventid:"89c9d496-1"},on:{click:function(e){t.orderNavigateHandle("../order/orderlist")}}},[t._m(0),t._m(1)])]),i("view",{staticClass:"member-grid"},[t._l(t.orderItems,function(e,a){return i("view",{key:a,staticClass:"member-item",attrs:{eventid:"89c9d496-2-"+a},on:{click:function(e){t.orderNavigateHandle("../order/orderlist",a+1)}}},[e.nums?i("view",{staticClass:"badge color-f"},[t._v(t._s(e.nums))]):t._e(),i("image",{staticClass:"member-item-icon",attrs:{src:e.icon}}),i("text",{staticClass:"member-item-text"},[t._v(t._s(e.name))])])}),i("view",{staticClass:"member-item",attrs:{eventid:"89c9d496-3"},on:{click:t.goAfterSaleList}},[0!=t.afterSaleNums?i("view",{staticClass:"badge color-f"},[t._v(t._s(t.afterSaleNums))]):t._e(),i("image",{staticClass:"member-item-icon",attrs:{src:"../../../static/image/me-ic-evaluate.png"}}),i("text",{staticClass:"member-item-text"},[t._v("退换货")])])],2),i("view",{staticClass:"cell-group margin-cell-group right-img"},[t._l(t.utilityMenus,function(e,a){return i("view",{key:a,staticClass:"cell-item"},[i("view",{staticClass:"cell-item-hd",attrs:{eventid:"89c9d496-4-"+a},on:{click:function(i){t.navigateToHandle(e.router)}}},[i("image",{staticClass:"cell-hd-icon",attrs:{src:e.icon}}),i("view",{staticClass:"cell-hd-title"},[t._v(t._s(e.name))])]),t._m(2,!0)])}),i("view",{staticClass:"cell-item"},[i("view",{staticClass:"cell-item-hd",attrs:{eventid:"89c9d496-5"},on:{click:function(e){t.showChat()}}},[i("image",{staticClass:"cell-hd-icon",attrs:{src:"../../../static/image/me-ic-phone.png"}}),i("view",{staticClass:"cell-hd-title"},[t._v("联系客服")])]),t._m(3)])],2),t.isClerk?i("view",{staticClass:"cell-group margin-cell-group right-img"},t._l(t.clerk,function(e,a){return i("view",{key:a,staticClass:"cell-item"},[i("view",{staticClass:"cell-item-hd",attrs:{eventid:"89c9d496-6-"+a},on:{click:function(i){t.navigateToHandle(e.router)}}},[i("image",{staticClass:"cell-hd-icon",attrs:{src:e.icon}}),i("view",{staticClass:"cell-hd-title"},[t._v(t._s(e.name))])]),t._m(4,!0)])})):t._e(),i("jihaiCopyright",{attrs:{mpcomid:"89c9d496-2"}})],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-hd"},[i("view",{staticClass:"cell-hd-title"},[t._v("我的订单")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"../../../static/image/right.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"../../../static/image/right.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"../../../static/image/right.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"../../../static/image/right.png"}})])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},b0cc:function(t,e,i){},b999:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("dd87")),n=i("4856");function s(t){return t&&t.__esModule?t:{default:t}}var o={components:{jihaiCopyright:a.default},mixins:[n.checkLogin],data:function(){return{open_id:"",hasLogin:!1,userInfo:{},kefupara:"",afterSaleNums:0,isClerk:!1,orderItems:[{name:"待付款",icon:"../../../static/image/me-ic-obligation.png",nums:0},{name:"待发货",icon:"../../../static/image/me-ic-sendout.png",nums:0},{name:"待收货",icon:"../../../static/image/me-ic-receiving.png",nums:0},{name:"待评价",icon:"../../../static/image/me-ic-evaluate.png",nums:0}],utilityMenus:{distribution:{name:"分销中心",icon:"../../../static/image/distribution.png",router:"../distribution/user"},coupon:{name:"我的优惠券",icon:"../../../static/image/ic-me-coupon.png",router:"../coupon/index"},balance:{name:"我的余额",icon:"../../../static/image/ic-me-balance.png",router:"../balance/index"},integral:{name:"我的积分",icon:"../../../static/image/integral.png",router:"../integral/index"},address:{name:"地址管理",icon:"../../../static/image/me-ic-site.png",router:"../address/list"},collection:{name:"我的收藏",icon:"../../../static/image/ic-me-collect.png",router:"../collection/index"},history:{name:"我的足迹",icon:"../../../static/image/ic-me-track.png",router:"../history/index"},invite:{name:"邀请好友",icon:"../../../static/image/ic-me-invite.png",router:"../invite/index"},setting:{name:"系统设置",icon:"../../../static/image/me-ic-set.png",router:"../setting/index"}},clerk:[{name:"提货单列表",icon:"../../../static/image/me-ic-phone.png",router:"../take_delivery/list"},{name:"提货单核销",icon:"../../../static/image/me-ic-about.png",router:"../take_delivery/index"}]}},onShow:function(){this.initData()},methods:{getUserInfo:function(t){var e=this;if("getUserInfo:fail auth deny"==t.detail.errMsg)e.$common.errorToShow("未授权");else{var i={open_id:e.open_id,iv:t.detail.iv,edata:t.detail.encryptedData,signature:t.detail.signature},a=e.$db.get("invitecode");a&&(i.invitecode=a),e.toWxLogin(i)}},getALICode:function(){var e=this,i=this;t.login({scopes:"auth_user",success:function(t){t.authCode?i.aLiLoginStep1(t.authCode):e.$common.errorToShow("未取得code")},fail:function(t){this.$common.errorToShow("用户授权失败my.login")}})},getWxCode:function(){var e=this;t.login({scopes:"auth_user",success:function(t){t.code?e.wxLoginStep1(t.code):this.$common.errorToShow("未取得code")},fail:function(t){this.$common.errorToShow("用户授权失败wx.login")}})},wxLoginStep1:function(e){var i=this;this.$api.login1({code:e},function(e){e.status?i.open_id=e.data:i.$common.errorToShow(e.msg,function(){t.navigateBack({delta:1})})})},aLiLoginStep1:function(t){var e=this;this.$api.alilogin1({code:t},function(t){t.status?(e.open_id=t.data.user_wx_id,t.data.hasOwnProperty("token")?(e.$db.set("userToken",t.data.token),e.initData()):e.$common.redirectTo("/pages/login/login/index?user_wx_id="+t.data.user_wx_id)):e.$common.errorToShow(t.msg)})},toWxLogin:function(e){var i=this;i.$api.login2(e,function(e){e.status?"undefined"==typeof e.data.token?t.redirectTo({url:"/pages/login/login/index?user_wx_id="+e.data.user_wx_id}):(i.$db.set("userToken",e.data.token),i.initData()):i.$common.errorToShow("登录失败，请重试")})},toLogin:function(){this.$common.navigateTo("../../login/login/index1")},initData:function(){var t=this,e=this;this.$store.state.config.open_distribution?delete this.utilityMenus.invite:delete this.utilityMenus.distribution,this.$db.get("userToken")?(this.hasLogin=!0,this.$api.userInfo({},function(i){if(i.status){e.userInfo=i.data;var a={ids:"1,2,3,4",isAfterSale:!0};e.$api.getOrderStatusSum(a,function(t){t.status&&(e.orderItems.forEach(function(e,i){e.nums=t.data[i+1]}),e.afterSaleNums=t.data.isAfterSale?t.data.isAfterSale:0)}),t.$api.isStoreUser({},function(e){t.isClerk=e.flag})}})):this.hasLogin=!1},navigateToHandle:function(t){if(!this.hasLogin)return this.checkIsLogin();this.$common.navigateTo(t)},orderNavigateHandle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.hasLogin)return this.checkIsLogin();this.$store.commit("orderTab",e),this.$common.navigateTo(t)},goAfterSaleList:function(){if(!this.hasLogin)return this.checkIsLogin();this.$common.navigateTo("../after_sale/list")},showChat:function(){this.kfmobile?t.makePhoneCall({phoneNumber:""+this.kfmobile,success:function(){}}):this.$common.errorToShow("商户未设置客服手机号")}},computed:{kfmobile:function(){return this.$store.state.config.shop_mobile||0}},watch:{}};e.default=o}).call(this,i("6e42")["default"])},df61:function(t,e,i){"use strict";var a=i("b0cc"),n=i.n(a);n.a},e19b:function(t,e,i){"use strict";i.r(e);var a=i("b999"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a}},[["9b10","common/runtime","common/vendor"]]]);