(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-payment-auth"],{"0a0e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={data:function(){return{type:"",openid:"",orderId:"",state:""}},onLoad:function(t){this.orderId=t.order_id,this.money=Number(t.money),this.type=Number(t.type),this.uid=Number(t.uid),this.state=this.$common.getQueryString("state"),this.getCode()},methods:{getCode:function(){var t=this.$common.getQueryString("code");t&&this.getOpenId(t)},getOpenId:function(t){var e=this,n={code:t,scope:2,state:this.state};this.$api.getOpenId(n,function(t){t.status?(e.openid=t.data.openid,e.toPayHandler("wechatpay")):e.$common.errorToShow(t.msg)})},checkWXJSBridge:function(t){var e=this,n=setInterval(function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(n),e.onBridgeReady(t))},200)},onBridgeReady:function(t){var e=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appid,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(n){"get_brand_wcpay_request:ok"===n.err_msg?e.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===n.err_msg?e.$common.errorToShow("取消支付"):e.$common.errorToShow("支付失败"),setTimeout(function(){e.$common.redirectTo("/pages/goods/payment/result?id="+t.payment_id)},1e3)})},toPayHandler:function(t){var e=this,n={payment_code:t,payment_type:this.type};n["ids"]=(this.type,this.orderId),1==this.type&&this.orderId?this.openid&&(n["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid}):2==this.type&&this.money?this.openid&&(n["params"]={trade_type:"JSAPI_OFFICIAL",money:this.money,openid:this.openid}):5!=this.type&&6!=this.type||!this.recharge||(n["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid,formid:this.orderId}),this.$api.pay(n,function(t){if(t.status){var n=t.data;e.checkWXJSBridge(n)}else e.$common.errorToShow(t.msg)})}}};e.default=a},"224f":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".content[data-v-398fdafa]{position:relative;height:80vh}.content-c[data-v-398fdafa]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center}.load-img[data-v-398fdafa]{width:%?100?%;height:%?100?%}.load-text[data-v-398fdafa]{font-size:%?26?%}",""])},"3de1":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"content-c"},[n("v-uni-image",{staticClass:"load-img",attrs:{src:"../static/image/loading.gif",mode:""}}),n("v-uni-view",{staticClass:"load-text color-9"},[t._v("信息加载中.....")])],1)],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},6753:function(t,e,n){"use strict";n.r(e);var a=n("0a0e"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},"7e51":function(t,e,n){"use strict";n.r(e);var a=n("3de1"),i=n("6753");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("f69b");var r=n("2877"),s=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,"398fdafa",null);e["default"]=s.exports},ddfa:function(t,e,n){var a=n("224f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("8cb91250",a,!0,{sourceMap:!1,shadowMode:!1})},f69b:function(t,e,n){"use strict";var a=n("ddfa"),i=n.n(a);i.a}}]);